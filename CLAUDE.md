# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Substitution Mapping Mixer is a web-based workbench for **manual analysis of substitution ciphers**. It is NOT an automatic solver—it provides a thinking space where users maintain partial mappings, hold ambiguous hypotheses, and compare multiple decoding branches.

## Key Domain Concepts

- **Uppercase letters (A-Z)**: Undecoded ciphertext characters
- **Lowercase letters (a-z)**: Confirmed plaintext (user-provided)
- **Fixed mapping**: Exactly one plaintext letter assigned to a cipher letter (e.g., `Q → e`)
- **Candidate mapping**: Multiple possible plaintext letters (e.g., `X → {y, m, n}`)
- **Branch**: A fully-fixed substitution table generated by selecting one candidate per cipher character with candidates

## Architecture Constraints

The UI follows strict layout principles (see UI_SPEC.md):
1. Branch results are always the primary content
2. Horizontal space must never be contested—vertical scrolling only
3. Full-width layout; substitution table is a slide-in overlay panel
4. Branch cards stack vertically and are never auto-collapsed

## Implementation Notes

- Conflicts (same plaintext mapped to multiple cipher letters) must be shown visually but never block execution
- Undecoded characters render as a unified marker (e.g., `?`)
- Mutual highlighting: hovering cipher letters in text highlights mapping table rows and vice versa
- Branch-specific mappings should be visually emphasized in decoded output

## Design Philosophy

This tool explicitly rejects:
- Automatic scoring or ranking of branches
- Dictionary-based elimination
- Side-by-side permanent panels
- Horizontal scrolling of branch results
- Automatic branch pruning

The goal is a stable board for human thinking, not automation.
